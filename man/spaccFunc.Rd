% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/phylofunc.R
\name{spaccFunc}
\alias{spaccFunc}
\title{Spatial Functional Diversity Accumulation}
\usage{
spaccFunc(
  x,
  coords,
  traits,
  metric = c("fdis", "fric"),
  n_seeds = 50L,
  method = "knn",
  distance = c("euclidean", "haversine"),
  parallel = TRUE,
  n_cores = NULL,
  progress = TRUE,
  seed = NULL,
  map = FALSE
)
}
\arguments{
\item{x}{A site-by-species matrix (abundance data recommended).}

\item{coords}{A data.frame with columns \code{x} and \code{y}, or a \code{spacc_dist} object.}

\item{traits}{A species-by-traits matrix. Row names should match species (columns of x).}

\item{metric}{Character vector. Metrics to compute:
\itemize{
\item \code{"fdis"}: Functional Dispersion (mean distance to centroid)
\item \code{"fric"}: Functional Richness (convex hull volume approximation)
}}

\item{n_seeds}{Integer. Number of random starting points. Default 50.}

\item{method}{Character. Accumulation method. Default \code{"knn"}.}

\item{distance}{Character. Site distance method: \code{"euclidean"} or \code{"haversine"}.}

\item{parallel}{Logical. Use parallel processing? Default \code{TRUE}.}

\item{n_cores}{Integer. Number of cores.}

\item{progress}{Logical. Show progress? Default \code{TRUE}.}

\item{seed}{Integer. Random seed.}

\item{map}{Logical. If \code{TRUE}, run accumulation from every site as seed
and store per-site final values for spatial mapping. Enables
\code{\link[=as_sf]{as_sf()}} and \code{plot(type = "map")}. Default \code{FALSE}.}
}
\value{
An object of class \code{spacc_func} containing:
\item{curves}{Named list of matrices, one per metric (n_seeds x n_sites)}
\item{metric}{Metrics computed}
\item{coords, n_seeds, n_sites, method}{Parameters used}
}
\description{
Compute spatial accumulation of functional diversity metrics based on traits.
}
\details{
Functional diversity metrics quantify trait space occupation:
\itemize{
\item \strong{FDis (Functional Dispersion)}: Abundance-weighted mean distance from
the community centroid in trait space. Captures functional divergence.
\item \strong{FRic (Functional Richness)}: Volume of trait space occupied (convex hull).
Requires more species than traits to compute.
}
}
\examples{
\dontrun{
coords <- data.frame(x = runif(50), y = runif(50))
species <- matrix(rpois(50 * 20, 2), nrow = 50)

# Trait matrix (species x traits)
traits <- matrix(rnorm(20 * 3), nrow = 20)
rownames(traits) <- paste0("sp", 1:20)
colnames(species) <- rownames(traits)

func <- spaccFunc(species, coords, traits, metric = c("fdis", "fric"))
plot(func)
}

}
\references{
LalibertÃ©, E. & Legendre, P. (2010). A distance-based framework for measuring
functional diversity from multiple traits. Ecology, 91, 299-305.
}
\seealso{
\code{\link[FD:dbFD]{FD::dbFD()}} for comprehensive functional diversity analysis
}
